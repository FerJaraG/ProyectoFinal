<h1>Perfil Camping</h1>
<div class="">
	<%= form_with(model: @camping, local: true) do |f| %>

		<div class="form-group">
			<%= f.label :name %>
			<%= f.text_field :name, autofocus: true %>
		</div>

		<div class="form-group">
			<%= f.label :description %>
			<%= f.text_area :description %>
		</div>

		<div class="form-group">
	    	<%= f.label :camping_type %><br>
	    	<%= f.select :camping_type, Camping.camping_types.keys%>
	    </div><br>

	    <div class="form-group">
			<%= f.label :address %>
			<%= f.text_field :address%>
		</div>

		<div class="form-group">
	      	<%= f.label :country %><br />
			<%= f.select :country, @country.pluck(:name, :id), prompt: 'Seleccione Pais'%>
	    </div><br>

		<div class="form-group">
	      <%= f.label :region %><br>
	      <select id="regions"></select>
	    </div><br>

		<div class="form-group">
	      <%= f.label :city %><br>
	      <select id="cities"></select>
	    </div><br>

	    <div class="form-group">
	      <%= f.label :commune%><br>
	      <select id="commune_id" name="camping[commune_id]"></select>
	    </div><br>

		<div class="form-group">
			<%= f.label :rules %>
			<%= f.text_area :rules %>
		</div>

		<div class="form-group">
  			<%= f.label :images %>
  			<%= f.file_field :images, id: :image_image, multiple: true, class: "form-control" %>
  		 </div><br>

  		 <div class="field">
  			 <%= f.label "Servicios" %><br />
 			 <%= f.collection_check_boxes :service_ids, Service.all, :id, :name do |b| %>
		   		 <div class="collection-check-box">
		  			<%= b.check_box %>
		      		<%= b.label %>
		    	</div>
 			 <% end %>
		</div>

		<div class="actions">
			<%= f.submit %>
		</div>
	<% end %>
</div>

<script>

	$('select[name="camping[country]"]').on('change', function(event){
		$.ajax({
			url: '<%= regions_path %>',
			type: 'get',
			dataType: 'script',
			data: {country_id: $(this).val()}
		})
	})

	$('#regions').on('change', function(event){
		$.ajax({
			url: '<%= cities_path %>',
			type: 'get',
			dataType: 'script',
			data: {region_id: $(this).val()}
		})
	})

	$('#cities').on('change', function(event){
		$.ajax({
			url: '<%= communes_path %>',
			type: 'get',
			dataType: 'script',
			data: {city_id: $(this).val()}
		})
	});
</script>